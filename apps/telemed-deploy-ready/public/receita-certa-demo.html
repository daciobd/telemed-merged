<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Receita Certa (demo) | TeleMed</title>
  <link rel="stylesheet" href="/assets/css/base.css" />
  <style>
    .container{max-width:860px;margin:48px auto;padding:16px}
    .card{background:#f3f7fb;border:1px solid rgba(0,0,0,.06);border-radius:16px;padding:32px;text-align:center}
    .icon{font-size:64px;margin-bottom:16px}
    h1{margin:0 0 12px;font-size:28px;font-weight:800}
    .muted{color:var(--muted);line-height:1.6}
    .info-box{background:#eef2ff;border:1px solid rgba(37,99,235,.2);border-radius:12px;padding:16px;margin:24px 0;text-align:left}
    ul{text-align:left;line-height:1.8}
    .rx-preview{background:#fff;border:1px solid rgba(0,0,0,.1);border-radius:12px;padding:20px;margin:20px 0;text-align:left;font-family:monospace;font-size:14px}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="icon">üíä</div>
      <h1>Receita Certa</h1>
      <p class="muted">Sistema de prescri√ß√£o digital com valida√ß√£o e assinatura eletr√¥nica</p>
      
      <div class="rx-preview">
        <strong>üìù Preview da Receita:</strong><br><br>
        Paciente: <span id="patientName">N√£o especificado</span><br>
        Data: <span id="rxDate"></span><br>
        <br>
        <em>Medicamentos prescritos aparecer√£o aqui...</em>
      </div>

      <div class="info-box">
        <strong>üîê Funcionalidades:</strong>
        <ul>
          <li>Prescri√ß√£o digital com assinatura eletr√¥nica (ICP-Brasil)</li>
          <li>Valida√ß√£o de intera√ß√µes medicamentosas</li>
          <li>Templates de receitas comuns</li>
          <li>Hist√≥rico de prescri√ß√µes do paciente</li>
          <li>Integra√ß√£o com farm√°cias parceiras</li>
        </ul>
      </div>

      <p class="muted">
        <strong>Status:</strong> Demo stub local. Integra√ß√£o real com sistema de prescri√ß√£o pode ser configurada.<br>
        Esta janela simula a visualiza√ß√£o/assinatura de receitas durante a consulta.
      </p>
      
      <button onclick="window.close()" class="btn" data-testid="button-fechar">Fechar janela</button>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(location.search);
    const pid = urlParams.get('pid');
    
    document.getElementById('rxDate').textContent = new Date().toLocaleDateString('pt-BR');
    
    if(pid) {
      console.log('üíä ReceitaCerta aberto para paciente:', pid);
      document.getElementById('patientName').textContent = `ID: ${pid}`;
    }
    
    try{window.Telemetry?.event?.({event_name:'page_view',meta:{page:'/public/receita-certa-demo.html',patient_id:pid}});}catch(e){}
  </script>
</body>
</html>
